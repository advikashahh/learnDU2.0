<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style/form_logo_bar.css">         <link rel="stylesheet" href="../style/form_logo_bar1.css">         <link rel="stylesheet" href="../style/form_logo_bar2.css">
    <!-- <link rel="stylesheet" href="../style/common-pyq.css">      <link rel="stylesheet" href="../style/common-pyq2.css">      <link rel="stylesheet" href="../style/common-pyq3.css"> -->
    <link rel="stylesheet" href="../style/common.css">  <link rel="stylesheet" href="../style/common2.css">  <link rel="stylesheet" href="../style/common3.css">
    <link rel="stylesheet" href="buy-sell.css">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Listing</title>




<!-- ////////////////navbar////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
<div class="navigation-bar" id="navigationBar">
    <a id="headlogo" href="../index"> <div class="logo">
        <img src="../img/logomain.png" alt="Logo">
    </div> </a>
    <div class="menu">
        <ul>
            <a href="../index.html"><li>Home</li></a>
            <a href="buy.html" ><li>Buy Book</li></a>
            <a href="buy-sell.html" ><li>List Book</li></a>
            <a href="my-listing.html" ><li>My Listing</li></a>
            <a href="../contact_us.html"><li>Contact Us</li></a>
            <a href="../login.html"><li>Login</li></a>
        </ul>
    </div>
    <div class="mobile-menu" id="mobileMenu">
        <ul>
            <a href="../index"><li class="main-menu-content">Home</li></a>
            <a href="buy" ><li>Buy Book</li></a>
            <a href="buy-sell" ><li>List Book</li></a>
            <a href="my-listing" ><li>My Listing</li></a>
            <a href="../contact_us"><li>Contact Us</li></a>
            <a href="../login"><li>Login</li></a>
        </ul>
        <div class="box">
            <div class="icon"><i id="sm-icons" class="bi bi-instagram"></i></div> 
        </div>
    </div>
    <div class="hamburger-icon" id="hamburgerIcon" onclick="toggleMobileMenu()">
        <div class="l1">&#9776;</div>
    </div>
</div> 



  
</head>
<body>



    

    
    <div class="con_1">
        <h1>Let's Make the World Better. <br>Give our books a second home.</h1>
        <h2>Add your books for sale to juniors or contact seniors to buy their books for a greener and smarter choice!</h2>
    </div>
    


 
<div class="con_2">
    <div class="box1"><img src="../img/34f43f4rvev.png" alt=""></div>
    <div class="box2">
<button onclick="showContainer()" >List Book</button>
<a href="buy.html"><button>Buy Book</button></a>

    </div>
</div>












<script>
    function toggleMobileMenu() {
        var mobileMenu = document.getElementById('mobileMenu');
        mobileMenu.classList.toggle('show-menu');
    }

    document.addEventListener("DOMContentLoaded", function() {
        var mobileMenu = document.getElementById('mobileMenu');
        var container = document.getElementById('container');

        window.addEventListener("scroll", function() {
            mobileMenu.classList.remove('show-menu');
        });

        container.addEventListener("click", function() {
            mobileMenu.classList.remove('show-menu');
        });

        mobileMenu.addEventListener("click", function() {
            mobileMenu.classList.remove('show-menu');
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
    const dropdowns = document.querySelectorAll('.dropdown');

    dropdowns.forEach(dropdown => {
        const link = dropdown.querySelector('a');
        const menu = dropdown.querySelector('.dropdown-content');

        link.addEventListener('click', function(event) {
            event.preventDefault(); // Prevent the default action of the link
            event.stopPropagation(); // Prevent the click event from bubbling up
            
            // Hide all dropdown menus
            document.querySelectorAll('.dropdown-content').forEach(content => {
                content.style.display = 'none';
            });

            // Show the clicked dropdown menu
            menu.style.display = 'flex';
        });

        window.addEventListener('scroll', function() {
            menu.style.display = 'none';
        });

        document.addEventListener('click', function(event) {
            if (!event.target.closest('.dropdown-content') && !event.target.closest('.dropdown > a')) {
                menu.style.display = 'none';
            }
        });

        menu.addEventListener('click', function() {
            menu.style.display = 'none';
        });
    });
});
</script>


      <script>
        function showContainer() {
            const container = document.getElementById('form-container');
            container.style.display = 'flex';
            container.scrollIntoView({ behavior: 'smooth' });
        }

</script>



<!-- <a href="https://wa.me/{phoneNumber}?text=Hi%20{name}%2C%20came%20across%20your%20book%20listing%2C%20book%20name%20{bookName}%20on%20Learn%20DU.%20I%20am%20interested%20in%20buying.%20Kindly%20revert%20ASAP%21"></a> -->


<div class="form-container" id="form-container">
    <form id="bookForm" onsubmit="submitForm(event)" enctype="multipart/form-data">

        <input type="text" id="name" name="name" placeholder="NAME" required>
        <input type="tel" id="whatsappNumber" name="whatsapp" placeholder="WHATSAPP NUMBER" required>
        <input type="text" id="college" name="college" placeholder="COLLEGE NAME" required>
        <input type="text" id="bookname" name="bookname" placeholder="BOOK NAME" required>

        <div class="all-Category-btn">
            <p>Select Book Category</p>
            <div class="all-Category-btn-sub">
                <label class="radio-label">
                    <input type="radio" name="category" class="radio-button" id="Category-btn-Commerce" onclick="showOptions('commerce')" required>
                    <span class="radio-text">Commerce</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="category" class="radio-button" id="Category-btn-Humanities" onclick="showOptions('humanities')">
                    <span class="radio-text">Humanities</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="category" class="radio-button" id="Category-btn-Science" onclick="showOptions('science')">
                    <span class="radio-text">Science</span>
                </label>
                <label class="radio-label">
                    <input type="radio" name="category" class="radio-button" id="Category-btn-Others" onclick="showOptions('others')">
                    <span class="radio-text">Others</span>
                </label>
            </div>
        </div>

        <!-- Option and Subject Selection Sections (ensure correct naming) -->
        <div class="all-options-btn-container">
            <!-- Commerce -->
            <div id="commerce" class="option-container">
                <label>
                    <input type="radio" name="option" value="Option 1" onclick="showSubjects('commerceOption1')"> 
                    <span class="option-radio-text">B.Com. (Hons.)</span>
                </label>
                <label>
                    <input type="radio" name="option" value="Option 2" onclick="showSubjects('commerceOption2')"> 
                    <span class="option-radio-text">Option 2</span>
                </label>
            </div>

            <!-- Humanities -->
            <div id="humanities" class="option-container">
                <label>
                    <input type="radio" name="option" value="Option 1" onclick="showSubjects('humanitiesOption1')"> 
                    <span class="option-radio-text">Option 1</span>
                </label>
                <label>
                    <input type="radio" name="option" value="Option 2" onclick="showSubjects('humanitiesOption2')"> 
                    <span class="option-radio-text">Option 2</span>
                </label>
            </div>

            <!-- Science -->
            <div id="science" class="option-container">
                <label>
                    <input type="radio" name="option" value="Option 1" onclick="showSubjects('scienceOption1')"> 
                    <span class="option-radio-text">Option 1</span>
                </label>
                <label>
                    <input type="radio" name="option" value="Option 2" onclick="showSubjects('scienceOption2')"> 
                    <span class="option-radio-text">Option 2</span>
                </label>
            </div>

            <!-- Others -->
            <div id="others" class="option-container">
                <label>
                    <input type="radio" name="option" value="Option 1" onclick="showSubjects('othersOption1')"> 
                    <span class="option-radio-text">Option 1</span>
                </label>
                <label>
                    <input type="radio" name="option" value="Option 2" onclick="showSubjects('othersOption2')"> 
                    <span class="option-radio-text">Option 2</span>
                </label>
            </div>
        </div>

        <!-- Subject Selection (ensure correct naming) -->
        <div id="commerceOption1" class="subject-container">
            <label>
                <input type="radio" name="subject" value="Subject 1"> Subject 1
            </label>
            <label>
                <input type="radio" name="subject" value="Subject 2"> Subject 2
            </label>
        </div>

        <p id="upload-title">Upload Book Cover Page  
            <span id="upload-timit-title"> Max. size 100Kb. Compress using 
                <a href="https://jpeg-optimizer.com/compress-jpeg-to-100kb/" target="_blank">jpeg optimizer</a>
            </span>
        </p>
        <div class="file-upload-container">
            <div class="file-upload-container-box" onclick="document.getElementById('file-input-area-sub').click()">
                <div class="file-upload-icon">⬆</div>
                <div class="file-upload-text" id="file-upload-text">Browse File to upload!</div>
                <input type="file" id="file-input-area-sub" name="coverPage" accept="image/jpeg, image/png, image/jpg" onchange="updateFileName()" required>
                <div class="file-upload-footer">
                    <span id="file-upload-footer-text">Click Here to upload File</span>
                    <div class="delete-icon" onclick="resetFileInput()">🗑️</div>
                </div>
            </div>
        </div>

        <input type="text" id="driveLink" name="driveLink" placeholder="DRIVE LINK OF BOOK INDEX AND MORE IMAGES" required>
        <input type="text" id="bookPrice" name="bookPrice" placeholder="Price (00.00)" required>

        <div id="errorMessages" style="color: red;"></div>
        <div class="error" id="error"></div>

        <div class="submit-btn-container">
            <button type="submit" class="form-submit-btn">
                SUBMIT
            </button>
        </div>
    </form>
</div>

<div class="after-submission-container" style="display: none;">
    <div class="after-submission-card">
        <div class="header">
            <span class="icon">
                <img src="../img/tick-d23d3.png" alt="">
            </span>
            <p class="alert">Book Listed Successfully!</p>
        </div>

        <p class="message">
            Your books have been successfully listed. Interested buyers will contact you directly through WhatsApp. <br><br>
            <span style="color: red;">Kindly note that the listing is only for 17 days.</span> <br> <br>
            After 17 days, the listing will be automatically deleted. Please make a new listing in case the book is unsold. If the book gets sold before 17 days, kindly delete your listing by visiting My Listing to avoid order messages from interested buyers.
        </p>

        <div class="actions">
            <a class="read" href="">Visit My Listing</a>
        </div>
    </div>
</div>

<script>
    function updateFileName() {
        const fileInput = document.getElementById('file-input-area-sub');
        const file = fileInput.files[0];
        const fileUploadText = document.getElementById('file-upload-text');
        const fileUploadFooterText = document.getElementById('file-upload-footer-text');
        const fileUploadContainer = document.querySelector('.file-upload-container-box');

        if (file) {
            console.log('File selected:', file.name);
            fileUploadText.innerText = file.name;
            fileUploadFooterText.innerText = file.name;

            // Display image preview
            const reader = new FileReader();
            reader.onload = function(e) {
                fileUploadContainer.style.backgroundImage = `url(${e.target.result})`;
                fileUploadContainer.style.backgroundSize = 'cover';
                fileUploadContainer.style.backgroundPosition = 'center';
            };
            reader.readAsDataURL(file);
        } else {
            console.log('No file selected');
            fileUploadText.innerText = 'Browse File to upload!';
            fileUploadFooterText.innerText = 'Click Here to upload File';
            fileUploadContainer.style.backgroundImage = 'none';
        }
    }

    function showOptions(category) {
        const optionContainers = document.getElementsByClassName('option-container');
        for (let i = 0; i < optionContainers.length; i++) {
            optionContainers[i].style.display = 'none';
        }
        document.getElementById(category).style.display = 'flex';

        const optionRadioButtons = document.querySelectorAll('.option-container-radio-btn');
        for (let i = 0; i < optionRadioButtons.length; i++) {
            optionRadioButtons[i].checked = false;
        }

        const subjects = document.getElementsByClassName('subject-container');
        for (let i = 0; i < subjects.length; i++) {
            subjects[i].style.display = 'none';
        }
    }

    function showSubjects(option) {
        const subjectContainers = document.getElementsByClassName('subject-container');
        for (let i = 0; i < subjectContainers.length; i++) {
            subjectContainers[i].style.display = 'none';
        }
        document.getElementById(option).style.display = 'flex';

        const subjectRadioButtons = document.querySelectorAll(`#${option} .subject-container-radio-btn`);
        for (let i = 0; i < subjectRadioButtons.length; i++) {
            subjectRadioButtons[i].checked = false;
            const label = subjectRadioButtons[i].closest('label');
            label.style.display = 'flex';
        }
    }

    function selectSubject(subject) {
        const subjectContainer = subject.closest('.subject-container');
        const subjectRadioButtons = subjectContainer.getElementsByClassName('subject-container-radio-btn');
        for (let i = 0; i < subjectRadioButtons.length; i++) {
            const label = subjectRadioButtons[i].closest('label');
            if (subjectRadioButtons[i] !== subject) {
                label.style.display = 'none';
            } else {
                label.style.display = 'flex';
            }
        }
    }

    function submitForm(event) {
        event.preventDefault();
        const form = document.getElementById('bookForm');
        const formData = new FormData(form);
        const errorElement = document.getElementById('error');
        errorElement.textContent = '';

        const name = document.getElementById('name').value;
        const whatsapp = document.getElementById("whatsappNumber").value;
        const college = document.getElementById('college').value;
        const bookName = document.getElementById('bookname').value;
        const driveLink = document.getElementById('driveLink').value;
        const bookPrice = document.getElementById('bookPrice').value;
        const frontPage = document.getElementById('file-input-area-sub').files[0];

        if (!name || !whatsapp || !college || !bookName || !bookPrice || !driveLink) {
            errorElement.textContent = 'All fields are mandatory!';
            return;
        }

        if (frontPage.size > 100 * 1024) { // 100KB
            alert('File size exceeds 100KB, kindly compress.');
            return;
        }

        fetch('http://localhost:4001/api/submit-book', {
            method: 'POST',
            body: formData,
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            if (data.message) {
                document.querySelector('.form-container').style.display = 'none';
                document.querySelector('.after-submission-container').style.display = 'block';
            } else {
                errorElement.textContent = 'Form submission failed: ' + data.message;
            }
        })
        .catch(error => {
            console.error('Error:', error);
            errorElement.textContent = 'Form submission failed. Please try again later.';
        });
    }
</script>





</html>


